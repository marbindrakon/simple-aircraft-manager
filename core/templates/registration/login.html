{% extends "base.html" %}
{% block title %}Login: Simple Aircraft Manager{% endblock %}

{% block content %}
<div class="pf-v5-c-page__main-section pf-m-light" style="text-align: center; padding: 3rem 0;">
	<h1>Simple Aircraft Manager</h1>
	<p>Please log in to continue</p>
</div>

<div class="pf-v5-c-page__main-section" style="display: flex; justify-content: center;">
	<div class="pf-v5-c-card" style="max-width: 500px; width: 100%;">
		<div class="pf-v5-c-card__title">
			<h2>Login</h2>
		</div>
		<div class="pf-v5-c-card__body">
			{% if OIDC_ENABLED %}
			<div style="margin-bottom: 2rem;">
				<a href="{% url 'oidc_authentication_init' %}" class="pf-v5-c-button pf-m-primary pf-m-block" style="margin-bottom: 1rem;">
					<i class="fas fa-sign-in-alt" style="margin-right: 0.5rem;"></i>
					Sign in with Keycloak
				</a>
				<div style="text-align: center; margin: 1.5rem 0; color: #6a6e73; font-size: 0.875rem;">
					<span style="display: inline-block; position: relative;">
						<span style="background: white; padding: 0 0.5rem; position: relative; z-index: 1;">or use local account</span>
						<span style="position: absolute; top: 50%; left: -100px; right: -100px; height: 1px; background: #d2d2d2; z-index: 0;"></span>
					</span>
				</div>
			</div>
			{% endif %}

			<form action="{% url 'login' %}" method="post" class="pf-v5-c-form">
				{% csrf_token %}

				{% if form.non_field_errors %}
				<div class="pf-v5-c-alert pf-m-danger pf-m-inline" role="alert">
					<div class="pf-v5-c-alert__icon">
						<i class="fas fa-exclamation-circle"></i>
					</div>
					<div class="pf-v5-c-alert__description">
						{{ form.non_field_errors }}
					</div>
				</div>
				{% endif %}

				<div class="pf-v5-c-form__group">
					<label class="pf-v5-c-form__label" for="{{ form.username.id_for_label }}">
						<span class="pf-v5-c-form__label-text">{{ form.username.label }}</span>
						<span class="pf-v5-c-form__label-required" aria-hidden="true">*</span>
					</label>
					<input type="text"
					       id="{{ form.username.id_for_label }}"
					       name="{{ form.username.name }}"
					       class="pf-v5-c-form-control"
					       required
					       autofocus>
					{% if form.username.errors %}
					<div class="pf-v5-c-form__helper-text pf-m-error">
						{{ form.username.errors }}
					</div>
					{% endif %}
				</div>

				<div class="pf-v5-c-form__group">
					<label class="pf-v5-c-form__label" for="{{ form.password.id_for_label }}">
						<span class="pf-v5-c-form__label-text">{{ form.password.label }}</span>
						<span class="pf-v5-c-form__label-required" aria-hidden="true">*</span>
					</label>
					<input type="password"
					       id="{{ form.password.id_for_label }}"
					       name="{{ form.password.name }}"
					       class="pf-v5-c-form-control"
					       required>
					{% if form.password.errors %}
					<div class="pf-v5-c-form__helper-text pf-m-error">
						{{ form.password.errors }}
					</div>
					{% endif %}
				</div>

				<div class="pf-v5-c-form__group pf-m-action">
					<button type="submit" class="pf-v5-c-button {% if OIDC_ENABLED %}pf-m-secondary{% else %}pf-m-primary{% endif %} pf-m-block">
						Log In
					</button>
				</div>

				<input type="hidden" name="next" value="{{ next }}">
			</form>
		</div>
	</div>
</div>
{% endblock %}
