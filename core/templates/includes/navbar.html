{% load static %}
<header class="pf-v5-c-page__header">
    <div class="pf-v5-c-page__header-brand">
        <a href="/" class="pf-v5-c-page__header-brand-link">
            <div class="pf-v5-c-brand">
                <span style="font-size: 1.5rem; font-weight: 700; color: white;">Simple Aircraft Manager</span>
            </div>
        </a>
    </div>
    <div class="pf-v5-c-page__header-nav" id="main-nav">
        <nav class="pf-v5-c-nav pf-m-horizontal" aria-label="Global">
            <ul class="pf-v5-c-nav__list">
                <li class="pf-v5-c-nav__item">
                    <a href="{% url 'dashboard' %}" class="pf-v5-c-nav__link {% if request.resolver_match.url_name == 'dashboard' %}pf-m-current{% endif %}">Aircraft</a>
                </li>
                {% if user_is_owner %}
                <li class="pf-v5-c-nav__item">
                    <a href="{% url 'logbook-import' %}" class="pf-v5-c-nav__link {% if request.resolver_match.url_name == 'logbook-import' %}pf-m-current{% endif %}">Import Logbooks</a>
                </li>
                {% endif %}
                {% if user.is_staff %}
                <li class="pf-v5-c-nav__item">
                    <a href="{% url 'manage-invitations' %}"
                       class="pf-v5-c-nav__link {% if 'manage' in request.resolver_match.url_name %}pf-m-current{% endif %}">
                        Manage
                    </a>
                </li>
                {% endif %}
            </ul>
        </nav>
    </div>
    <div class="pf-v5-c-page__header-tools">
        <button id="nav-mobile-toggle" aria-label="Toggle navigation" aria-expanded="false">
            <i class="fas fa-bars"></i>
        </button>
        <div class="pf-v5-c-page__header-tools-group">
            {% if user.is_authenticated %}
            <div class="pf-v5-c-dropdown" id="user-dropdown">
                <button class="pf-v5-c-dropdown__toggle pf-m-plain" type="button" aria-label="User menu" aria-expanded="false" id="user-dropdown-toggle">
                    <span class="pf-v5-c-dropdown__toggle-text">{{ user.get_full_name|default:user.username }}</span>
                    <span class="pf-v5-c-dropdown__toggle-icon">
                        <i class="fas fa-caret-down"></i>
                    </span>
                </button>
                <ul class="pf-v5-c-dropdown__menu" hidden id="user-dropdown-menu">
                    {% if user.has_usable_password %}
                    <li>
                        <a class="pf-v5-c-dropdown__menu-item" href="{% url 'profile' %}">My Profile</a>
                    </li>
                    <li class="pf-v5-c-dropdown__separator" role="separator"></li>
                    {% endif %}
                    <li>
                        <a class="pf-v5-c-dropdown__menu-item" href="https://docs.simple-aircraft.app" target="_blank" rel="noopener noreferrer">Documentation</a>
                    </li>
                    <li>
                        <a class="pf-v5-c-dropdown__menu-item" href="/api/">API</a>
                    </li>
                    {% if user.is_superuser %}
                    <li class="pf-v5-c-dropdown__separator" role="separator"></li>
                    <li>
                        <a class="pf-v5-c-dropdown__menu-item" href="/admin/">Admin</a>
                    </li>
                    {% endif %}
                    <li class="pf-v5-c-dropdown__separator" role="separator"></li>
                    <li role="none">
                        <button class="pf-v5-c-dropdown__menu-item theme-option" type="button" data-theme-value="light">
                            <span class="theme-option-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                    <circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
                                </svg>
                            </span>
                            Light
                            <span class="theme-option-check theme-check-light" aria-hidden="true">
                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="20 6 9 17 4 12"/>
                                </svg>
                            </span>
                        </button>
                    </li>
                    <li role="none">
                        <button class="pf-v5-c-dropdown__menu-item theme-option" type="button" data-theme-value="dark">
                            <span class="theme-option-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                                </svg>
                            </span>
                            Dark
                            <span class="theme-option-check theme-check-dark" aria-hidden="true">
                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="20 6 9 17 4 12"/>
                                </svg>
                            </span>
                        </button>
                    </li>
                    <li role="none">
                        <button class="pf-v5-c-dropdown__menu-item theme-option" type="button" data-theme-value="system">
                            <span class="theme-option-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                    <rect x="2" y="3" width="20" height="14" rx="2" ry="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/>
                                </svg>
                            </span>
                            System
                            <span class="theme-option-check theme-check-system" aria-hidden="true">
                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="20 6 9 17 4 12"/>
                                </svg>
                            </span>
                        </button>
                    </li>
                    <li class="pf-v5-c-dropdown__separator" role="separator"></li>
                    <li>
                        <a class="pf-v5-c-dropdown__menu-item" href="/accounts/logout/">Logout</a>
                    </li>
                </ul>
            </div>
            {% else %}
            <a href="/accounts/login/" class="pf-v5-c-button pf-m-primary">Login</a>
            {% endif %}
        </div>
    </div>
</header>
