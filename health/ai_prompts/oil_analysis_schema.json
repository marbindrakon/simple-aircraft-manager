{
  "type": "object",
  "required": ["samples"],
  "additionalProperties": false,
  "properties": {
    "tail_number": {
      "type": "string",
      "description": "Aircraft tail/registration number (e.g. N5516G)."
    },
    "oil_type":    {"anyOf": [{"type": "string"}, {"type": "null"}], "description": "Oil brand and grade used (e.g. Phillips XC 20W/50)."},
    "lab":         {"anyOf": [{"type": "string"}, {"type": "null"}], "description": "Name of the analysis laboratory (e.g. Blackstone Laboratories)."},
    "report_date": {"anyOf": [{"type": "string"}, {"type": "null"}], "description": "Date the report was issued (ISO 8601: YYYY-MM-DD)."},
    "lab_number":  {"anyOf": [{"type": "string"}, {"type": "null"}], "description": "Lab-assigned report or sample tracking number."},
    "samples": {
      "type": "array",
      "description": "Oil sample data points from the report, ordered most recent to oldest.",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["sample_date", "elements_ppm"],
        "additionalProperties": false,
        "properties": {
          "sample_date":      {"type": "string", "description": "Date the oil sample was taken (ISO 8601: YYYY-MM-DD)."},
          "analysis_date":    {"anyOf": [{"type": "string"}, {"type": "null"}], "description": "Date the lab performed the analysis (ISO 8601: YYYY-MM-DD)."},
          "sample_number":    {"anyOf": [{"type": "string"}, {"type": "null"}], "description": "Lab-assigned sample identifier."},
          "oil_hours":        {"anyOf": [{"type": "number"}, {"type": "null"}], "description": "Hours on the oil since last change at time of sampling."},
          "engine_hours":     {"anyOf": [{"type": "number"}, {"type": "null"}], "description": "Total engine hours (TSN or TSMOH) at time of sampling."},
          "oil_added_quarts": {"anyOf": [{"type": "number"}, {"type": "null"}], "description": "Makeup oil added (in quarts) during the sample interval."},
          "elements_ppm": {
            "type": "array",
            "description": "Elemental analysis in parts per million. Include only elements present in the report.",
            "items": {
              "type": "object",
              "required": ["element", "ppm"],
              "additionalProperties": false,
              "properties": {
                "element": {"type": "string", "description": "Element name in lowercase (e.g. iron, copper, lead, silicon)."},
                "ppm": {"anyOf": [{"type": "number"}, {"type": "null"}], "description": "Value in ppm. null if not reported or non-numeric. 0 if explicitly reported as zero."}
              }
            }
          },
          "oil_properties": {
            "type": "object",
            "required": [],
            "description": "Physical and chemical oil properties, if reported. Omit this field entirely if no properties section is present.",
            "additionalProperties": false,
            "properties": {
              "flashpoint_f":       {"type": "number", "description": "Flash point in degrees Fahrenheit."},
              "water_percent":      {"type": "number", "description": "Water content as a percentage."},
              "fuel_percent":       {"type": "number", "description": "Fuel dilution as a percentage."},
              "viscosity_sus_210f": {"type": "number", "description": "SUS viscosity at 210F."},
              "viscosity_cst_100c": {"type": "number", "description": "Kinematic viscosity in cSt at 100C."},
              "insolubles_percent": {"type": "number", "description": "Insolubles percentage."},
              "total_acid_number":  {"type": "number", "description": "Total Acid Number (TAN)."},
              "total_base_number":  {"type": "number", "description": "Total Base Number (TBN)."}
            }
          },
          "lab_comments": {"anyOf": [{"type": "string"}, {"type": "null"}], "description": "Lab technician comments or recommendations for this sample."},
          "status": {
            "type": "string",
            "enum": ["normal", "monitor", "action_required"],
            "description": "Overall lab assessment. Omit if not stated."
          }
        }
      }
    }
  }
}
